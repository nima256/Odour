<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>پروفایل کاربری</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        font-family: "Vazirmatn", sans-serif;
      }
      .tab-active {
        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        color: white;
      }
      .order-card {
        transition: all 0.3s ease;
      }
      .order-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }
      .cart-button {
        background-color: #2563eb;
        color: white;
        padding: 1rem;
        border-radius: 0.5rem;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        transition: all 0.3s;
        border: none;
        cursor: pointer;
      }

      .cart-button:hover {
        background-color: #1d4ed8;
        transform: scale(1.05);
      }

      .cart-button:focus {
        outline: none;
        box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.5);
      }

      .cart-button.success {
        background-color: #16a34a;
      }

      .cart-button.success:hover {
        background-color: #15803d;
      }

      .icon {
        width: 2rem;
        height: 2rem;
      }

      .hidden {
        display: none;
      }

      svg {
        stroke: currentColor;
        stroke-width: 2;
        stroke-linecap: round;
        stroke-linejoin: round;
        fill: none;
      }

      .logo-container {
        --logo-size: 2.5rem;
      }

      .logo {
        width: var(--logo-size);
        height: var(--logo-size);
      }

      .nav-link {
        transition: all 0.3s ease;
        position: relative;
      }

      .nav-link::after {
        content: "";
        position: absolute;
        width: 0;
        height: 2px;
        bottom: -4px;
        right: 50%;
        background: linear-gradient(90deg, #3b82f6, #1d4ed8);
        transition: all 0.3s ease;
      }

      .nav-link:hover::after {
        width: 100%;
        right: 0;
      }

      .icon-btn {
        transition: all 0.3s ease;
      }

      .icon-btn:hover {
        transform: translateY(-2px);
      }

      .mobile-menu {
        transition: all 0.3s ease;
        transform: translateX(100%);
        opacity: 0;
      }

      .mobile-menu.active {
        transform: translateX(0);
        opacity: 1;
      }
    </style>
  </head>
  <body
    class="bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen"
  >
    <nav
      class="fixed top-0 right-0 left-0 bg-white shadow-md z-50 px-4 md:px-6 py-3"
    >
      <div class="max-w-7xl mx-auto flex items-center justify-between">
        <!-- Logo -->
        <a href="#" class="flex items-center order-2 md:order-1 h-12 md:h-14">
          <div class="h-full overflow-hidden flex items-center">
            <img
              src="/logo.png"
              alt="لوگوی گلو بیوتی"
              class="h-full w-auto object-contain"
            />
          </div>
        </a>

        <!-- Desktop Menu -->
        <div
          class="hidden md:flex items-center space-x-8 space-x-reverse order-1 md:order-2"
        >
          <a
            href="/"
            class="nav-link text-gray-800 hover:text-pink-500 transition-colors"
            >خانه</a
          >
          <a
            href="/shop"
            class="nav-link text-gray-800 hover:text-pink-500 transition-colors"
            >فروشگاه</a
          >
          <a
            href="#"
            class="nav-link text-gray-800 hover:text-pink-500 transition-colors"
            >دسته‌بندی‌ها</a
          >
          <a
            href="/weblog"
            class="nav-link text-gray-800 hover:text-pink-500 transition-colors"
            >وبلاگ</a
          >
          <a
            href="#"
            class="nav-link text-gray-800 hover:text-pink-500 transition-colors"
            >درباره ما</a
          >
          <a
            href="#"
            class="nav-link text-gray-800 hover:text-pink-500 transition-colors"
            >تماس با ما</a
          >
        </div>

        <!-- Icons -->
        <div
          class="flex items-center space-x-4 space-x-reverse order-1 md:order-3"
        >
          <div class="relative">
            <button
              onclick="window.location.href='/cart';"
              class="relative text-gray-700 hover:text-pink-500 transition-colors"
            >
              <i class="fas fa-shopping-bag text-xl"></i>
            </button>
          </div>
          <button
            id="user-auth-button"
            class="text-gray-700 hover:text-pink-500 transition-colors"
          >
            <i class="fas fa-user text-xl"></i>
          </button>
        </div>
      </div>

      <!-- Mobile Menu -->
      <div
        id="mobile-menu"
        class="md:hidden hidden bg-white absolute right-0 left-0 top-full shadow-md"
      >
        <div class="flex flex-col px-4 py-2">
          <a
            href="/"
            class="py-2 text-gray-800 hover:text-pink-500 transition-colors"
            >خانه</a
          >
          <a
            href="/shop"
            class="py-2 text-gray-800 hover:text-pink-500 transition-colors"
            >فروشگاه</a
          >
          <a
            href=""
            class="py-2 text-gray-800 hover:text-pink-500 transition-colors"
            >دسته‌بندی‌ها</a
          >
          <a
            href="/weblog"
            class="py-2 text-gray-800 hover:text-pink-500 transition-colors"
            >وبلاگ</a
          >
          <a
            href="#"
            class="py-2 text-gray-800 hover:text-pink-500 transition-colors"
            >درباره ما</a
          >
          <a
            href="#"
            class="py-2 text-gray-800 hover:text-pink-500 transition-colors"
            >تماس با ما</a
          >
        </div>
      </div>
    </nav>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const mobileMenuButton = document.getElementById("mobile-menu-button");
        const mobileMenu = document.getElementById("mobile-menu");

        mobileMenuButton.addEventListener("click", function () {
          mobileMenu.classList.toggle("hidden");
        });

        // بستن منو هنگام کلیک خارج از آن
        document.addEventListener("click", function (event) {
          if (
            !mobileMenu.contains(event.target) &&
            event.target !== mobileMenuButton
          ) {
            mobileMenu.classList.add("hidden");
          }
        });
      });
    </script>
    <!-- Header -->
    <header
      class="bg-white/80 backdrop-blur-md shadow-lg border-b border-gray-200"
    >
      <div class="max-w-6xl mx-auto px-4 py-4">
        <h1 class="text-xl font-bold text-gray-800">پروفایل کاربری</h1>
      </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 py-8">
        <!-- Profile Section -->
        <div class="bg-white rounded-3xl p-8 shadow-xl border border-gray-100 mb-8">
            <div class="flex flex-col lg:flex-row items-center lg:items-start space-y-6 lg:space-y-0 lg:space-x-8 lg:space-x-reverse">
                <!-- Avatar -->
                <div class="w-32 h-32 rounded-3xl overflow-hidden shadow-lg bg-gradient-to-br from-purple-400 to-pink-500 flex items-center justify-center">
                    <svg class="w-16 h-16 text-white" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path>
                    </svg>
                </div>

                <!-- User Info -->
              <div class="flex-1 w-full">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label class="text-sm font-medium text-gray-700 mb-2 block"
                      >نام و نام خانوادگی</label
                    >
                    <input
                      type="text"
                      value="<%= user.fullName %>"
                      class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-2xl"
                      readonly
                    />
                  </div>
                  <div>
                    <label class="text-sm font-medium text-gray-700 mb-2 block"
                      >شماره تلفن</label
                    >
                    <input
                      type="text"
                      value="<%= toPersianDigitsForSizes(user.mobile) %>"
                      class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-2xl"
                      readonly
                    />
                  </div>
                  <div>
                    <label class="text-sm font-medium text-gray-700 mb-2 block"
                      >ایمیل</label
                    >
                    <input
                      type="email"
                      value="<%= user.email %>"
                      class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-2xl"
                      readonly
                    />
                  </div>
                </div>
              </div>
            </div>
        </div>

        <!-- Orders Section -->
        <div class="bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden">
            <!-- Header -->
            <div class="bg-gradient-to-r from-blue-500 to-purple-600 p-6">
                <h2 class="text-2xl font-bold text-white">سفارشات من</h2>
            </div>

            <!-- Tabs -->
            <div class="flex border-b border-gray-200 bg-gray-50">
              <% if (user.orders.length !== 0) {%>
              <% if (currentOrders.length > 0) { %>
                <button class="tab-btn flex-1 py-4 px-6 text-center font-medium transition-all text-gray-600 hover:text-blue-600" data-tab="current">
                  جاری (<%= currentOrders.length %>)
                </button>
              <% } %>
              <% if (completedOrders.length > 0) { %>
                <button class="tab-btn flex-1 py-4 px-6 text-center font-medium transition-all text-gray-600 hover:text-green-600" data-tab="completed">
                  تکمیل شده (<%= completedOrders.length %>)
                </button>
              <% } %>
              <% if (canceledOrders.length > 0) { %>
                <button class="tab-btn flex-1 py-4 px-6 text-center font-medium transition-all text-gray-600 hover:text-red-600" data-tab="canceled">
                  لغو شده (<%= canceledOrders.length %>)
                </button>
              <% } %>
              <% } else {%>
                <button class="tab-btn flex-1 py-4 px-6 text-center font-medium transition-all text-gray-600 hover:text-red-600 tab-active" data-tab="current">
                  بدون سفارش
                </button>
              <% } %>
            </div>

            <!-- Tab Content -->
             <% if (user.orders.length !== 0) {%>
            <div class="p-6">
                <!-- Current Orders -->
              <% if (currentOrders.length > 0) { %>
              <div id="current-tab" class="tab-content">
                <% currentOrders.forEach(order => { %>
                <div class="space-y-4">
                <div
                  class="order-card bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-2xl p-6 cursor-pointer mb-4"
                  onclick="showOrderDetails(this)"
                  data-order='<%= JSON.stringify({
                    id: order.OrderNum,
                    date: order.createTarikh,
                    totalPrice: order.totalPrice,
                    originalPrice: order.originalPrice,
                    discountAmount: order.discountAmount,
                    discount: order.discount, 
                    address: order.address,
                    delivery: order.delivery,
                    products: order.products.map(p => ({
                      name: p.product.name,
                      image: p.product.images[0].url,
                      price: p.product.price,
                      offerPrice: p.product.offerPrice,
                      quantity: p.quantity
                    }))
                  }) %>'
                >
                  <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center space-x-3 space-x-reverse">
                      <div
                        class="w-12 h-12 bg-green-500 rounded-2xl flex items-center justify-center"
                      >
                        <svg
                          class="w-6 h-6 text-white"
                          fill="currentColor"
                          viewBox="0 0 20 20"
                        >
                          <path
                            fill-rule="evenodd"
                            d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                            clip-rule="evenodd"
                          ></path>
                        </svg>
                      </div>
                      <div>
                        <h3 class="font-semibold text-gray-800">
                          سفارش #<%= order.OrderNum %>
                        </h3>
                        <p class="text-sm text-gray-600"><%= order.createTarikh %></p>
                      </div>
                    </div>
                    <div class="text-left">
                      <p class="text-lg font-bold text-green-600">
                        <%= toPersianDigits(order.totalPrice) %> تومان
                      </p>
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium 
                        <% if (order.status === 'لغو شده') { %>
                            bg-red-100 text-red-800
                        <% } else if (order.status === 'در انتظار پرداخت') { %>
                            bg-yellow-100 text-yellow-800
                        <% } else if (order.status === 'در حال پردازش') { %>
                            bg-blue-100 text-blue-800
                        <% } else if (order.status === 'بسته بندی شده') { %>
                            bg-purple-100 text-purple-800
                        <% } else if (order.status === 'در حال ارسال') { %>
                            bg-indigo-100 text-indigo-800
                        <% } else if (order.status === 'تحویل داده شد') { %>
                            bg-green-100 text-green-800
                        <% } %>
                    ">
                        <%= order.status %>
                    </span>
                    </div>
                  </div>
                  <div class="flex justify-between text-sm text-gray-600">
                    <div class="flex flex-col space-y-1"> <!-- Added column container -->
                      <% order.products.forEach(item => { %>
                        <div class="flex flex-col"> <!-- Column for each product -->
                              <span><%= item.product.name %> - <%= toPersianDigitsForSizes(item.quantity) %> عدد</span>
                        </div>
                      <% }) %>
                    </div>
                    <span class="text-green-600 hover:text-green-800 font-medium">
                      مشاهده جزئیات ←
                    </span>
                  </div>
                </div>
                </div>
                <% }) %>
              </div>
            <% } %>

                <!-- Completed Orders -->
                <% if (completedOrders.length > 0) { %>
                <div id="completed-tab" class="tab-content">
                    <% completedOrders.forEach(order => { %>
                    <div class="space-y-4">
                      <div
                        class="order-card bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-2xl p-6 cursor-pointer mb-4"
                        onclick="showOrderDetails(this)"
                        data-order='<%= JSON.stringify({
                          id: order.OrderNum,
                          date: order.createTarikh,
                          totalPrice: order.totalPrice,
                          originalPrice: order.originalPrice,
                          discountAmount: order.discountAmount,
                          discount: order.discount, 
                          address: order.address,
                          delivery: order.delivery,
                          products: order.products.map(p => ({
                            name: p.product.name,
                            image: p.product.images[0].url,
                            price: p.product.price,
                            quantity: p.quantity
                          }))
                        }) %>'
                      >
                        <div class="flex items-center justify-between mb-4">
                          <div class="flex items-center space-x-3 space-x-reverse">
                            <div
                              class="w-12 h-12 bg-green-500 rounded-2xl flex items-center justify-center"
                            >
                              <svg
                                class="w-6 h-6 text-white"
                                fill="currentColor"
                                viewBox="0 0 20 20"
                              >
                                <path
                                  fill-rule="evenodd"
                                  d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                  clip-rule="evenodd"
                                ></path>
                              </svg>
                            </div>
                            <div>
                              <h3 class="font-semibold text-gray-800">
                                سفارش #<%= order.OrderNum %>
                              </h3>
                              <p class="text-sm text-gray-600"><%= order.createTarikh %></p>
                            </div>
                          </div>
                          <div class="text-left">
                            <p class="text-lg font-bold text-green-600">
                              <%= toPersianDigits(order.totalPrice) %> تومان
                            </p>
                          <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium 
                              <% if (order.status === 'لغو شده') { %>
                                  bg-red-100 text-red-800
                              <% } else if (order.status === 'در انتظار پرداخت') { %>
                                  bg-yellow-100 text-yellow-800
                              <% } else if (order.status === 'در حال پردازش') { %>
                                  bg-blue-100 text-blue-800
                              <% } else if (order.status === 'بسته بندی شده') { %>
                                  bg-purple-100 text-purple-800
                              <% } else if (order.status === 'در حال ارسال') { %>
                                  bg-indigo-100 text-indigo-800
                              <% } else if (order.status === 'تحویل داده شد') { %>
                                  bg-green-100 text-green-800
                              <% } %>
                          ">
                              <%= order.status %>
                          </span>
                          </div>
                        </div>
                        <div class="flex justify-between text-sm text-gray-600">
                          <div class="flex flex-col space-y-1"> <!-- Added column container -->
                            <% order.products.forEach(item => { %>
                              <div class="flex flex-col"> <!-- Column for each product -->
                                    <span><%= item.product.name %> - <%= toPersianDigitsForSizes(item.quantity) %> عدد</span>
                              </div>
                            <% }) %>
                          </div>
                          <span class="text-green-600 hover:text-green-800 font-medium">
                            مشاهده جزئیات ←
                          </span>
                        </div>
                      </div>
                    </div>
                    <% }) %>
                </div>
                <% } %>

                <!-- Canceled Orders -->
                <% if (canceledOrders.length > 0) { %>
                <div id="canceled-tab" class="tab-content">
                  <% canceledOrders.forEach(order => { %>
                    <div class="space-y-4">
                      <div
                        class="order-card bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-2xl p-6 cursor-pointer mb-4"
                        onclick="showOrderDetails(this)"
                        data-order='<%= JSON.stringify({
                          id: order.OrderNum,
                          date: order.createTarikh,
                          totalPrice: order.totalPrice,
                          originalPrice: order.originalPrice,
                          discountAmount: order.discountAmount,
                          discount: order.discount, 
                          address: order.address,
                          delivery: order.delivery,
                          products: order.products.map(p => ({
                            name: p.product.name,
                            image: p.product.images[0].url,
                            price: p.product.price,
                            quantity: p.quantity
                          }))
                        }) %>'
                      >
                        <div class="flex items-center justify-between mb-4">
                          <div class="flex items-center space-x-3 space-x-reverse">
                            <div
                              class="w-12 h-12 bg-green-500 rounded-2xl flex items-center justify-center"
                            >
                              <svg
                                class="w-6 h-6 text-white"
                                fill="currentColor"
                                viewBox="0 0 20 20"
                              >
                                <path
                                  fill-rule="evenodd"
                                  d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                  clip-rule="evenodd"
                                ></path>
                              </svg>
                            </div>
                            <div>
                              <h3 class="font-semibold text-gray-800">
                                سفارش #<%= order.OrderNum %>
                              </h3>
                              <p class="text-sm text-gray-600"><%= order.createTarikh %></p>
                            </div>
                          </div>
                          <div class="text-left">
                            <p class="text-lg font-bold text-green-600">
                              <%= toPersianDigits(order.totalPrice) %> تومان
                            </p>
                          <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium 
                              <% if (order.status === 'لغو شده') { %>
                                  bg-red-100 text-red-800
                              <% } else if (order.status === 'در انتظار پرداخت') { %>
                                  bg-yellow-100 text-yellow-800
                              <% } else if (order.status === 'در حال پردازش') { %>
                                  bg-blue-100 text-blue-800
                              <% } else if (order.status === 'بسته بندی شده') { %>
                                  bg-purple-100 text-purple-800
                              <% } else if (order.status === 'در حال ارسال') { %>
                                  bg-indigo-100 text-indigo-800
                              <% } else if (order.status === 'تحویل داده شد') { %>
                                  bg-green-100 text-green-800
                              <% } %>
                          ">
                              <%= order.status %>
                          </span>
                          </div>
                        </div>
                        <div class="flex justify-between text-sm text-gray-600">
                          <div class="flex flex-col space-y-1"> <!-- Added column container -->
                            <% order.products.forEach(item => { %>
                              <div class="flex flex-col"> <!-- Column for each product -->
                                    <span><%= item.product.name %> - <%= toPersianDigitsForSizes(item.quantity) %> عدد</span>
                              </div>
                            <% }) %>
                          </div>
                          <span class="text-green-600 hover:text-green-800 font-medium">
                            مشاهده جزئیات ←
                          </span>
                        </div>
                      </div>
                    </div>
                  <% }) %>
                </div>
                <% } %>
            </div>
            <% } else { %>
              <div class="p-6">
                <div id="current-tab" class="tab-content">
                    <div class="text-center py-12">
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">هیچ سفارشی ثبت نکرده اید</h3>
                    </div>
                </div>
            <% } %>
        </div>
    </main>

    <!-- Order Details Modal -->
    <div
      id="order-modal"
      class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden items-center justify-center z-50 p-4"
    >
      <div
        class="bg-white rounded-3xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"
      >
        <div
          class="bg-gradient-to-r from-blue-500 to-purple-600 p-6 rounded-t-3xl"
        >
          <div class="flex items-center justify-between">
            <h3 class="text-xl font-bold text-white">جزئیات سفارش</h3>
            <button
              onclick="closeOrderModal()"
              class="text-white hover:text-gray-200"
            >
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                ></path>
              </svg>
            </button>
          </div>
        </div>

        <div class="p-6 space-y-6">
          <!-- Order Info -->
          <div class="bg-gray-50 rounded-2xl p-4">
            <div class="grid grid-cols-2 gap-4 text-sm">
              <div>
                <span class="text-gray-600">شماره سفارش:</span>
                <span
                  id="modal-order-id"
                  class="font-semibold text-gray-800 mr-2"
                ></span>
              </div>
              <div>
                <span class="text-gray-600">تاریخ:</span>
                <span
                  id="modal-order-date"
                  class="font-semibold text-gray-800 mr-2"
                ></span>
              </div>
              <div>
                <span class="text-gray-600">وضعیت:</span>
                <span
                  class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 mr-2"
                >
                  تحویل شده
                </span>
              </div>
              <div>
                <span class="text-gray-600">مبلغ کل:</span>
                <span
                  id="modal-order-price"
                  class="font-bold text-blue-600 mr-2"
                ></span>
              </div>
            </div>
          </div>

          <!-- Customer Info -->
          <div>
            <h4 class="font-semibold text-gray-800 mb-3">اطلاعات مشتری</h4>
            <div class="bg-purple-50 rounded-2xl p-4">
              <p class="text-gray-700">
                <span class="font-medium">نام:</span> <%= user.fullName %>
              </p>
              <p class="text-gray-700 mt-2">
                آدرس:
                <span class="font-medium" id="addressForInfo"></span>
              </p>
              <p class="text-gray-700 mt-2">
                <span class="font-medium">تلفن:</span> <%= user.mobile %>
              </p>
              <p class="text-gray-700 mt-2">
                روش ارسال:
                <span class="font-medium" id="deliveryForInfo"></span>
              </p>
            </div>
          </div>

          <!-- Products -->
          <div>
            <h4 class="font-semibold text-gray-800 mb-3">محصولات</h4>
              <div id="modal-products-container"> 

              </div>
          </div>

          <!-- Payment Summary -->
          <div class="bg-blue-50 rounded-2xl p-4">
            <h4 class="font-semibold text-gray-800 mb-3">خلاصه پرداخت</h4>
            <div class="space-y-2 text-sm">
              <div class="flex justify-between">
                <span class="text-gray-600">جمع کالاها:</span>
                <span id="modal-total-price" class="font-medium"></span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-600">تخفیف:</span>
                <span id="modal-discount-price" class="font-medium"></span>
              </div>
              <div class="border-t border-gray-200 pt-2 flex justify-between">
                <span class="font-semibold text-gray-800">مبلغ نهایی:</span>
                <span
                  id="modal-final-price"
                  class="font-bold text-blue-600"
                ></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer class="bg-gray-900 text-white py-12">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <div class="flex items-center space-x-reverse space-x-3 mb-4">
              <div
                class="w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg flex items-center justify-center"
              >
                <svg
                  class="w-6 h-6 text-white"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                  ></path>
                </svg>
              </div>
              <h3 class="text-xl font-bold">وبلاگ مدرن</h3>
            </div>
            <p class="text-gray-400 text-sm leading-relaxed">
              مرجع آموزش تکنولوژی، طراحی وب و برنامه‌نویسی در ایران
            </p>
          </div>
          <div>
            <h4 class="font-bold mb-4">دسته‌بندی‌ها</h4>
            <ul class="space-y-2 text-sm text-gray-400">
              <li>
                <a href="#" class="hover:text-white transition-colors"
                  >طراحی وب</a
                >
              </li>
              <li>
                <a href="#" class="hover:text-white transition-colors"
                  >برنامه‌نویسی</a
                >
              </li>
              <li>
                <a href="#" class="hover:text-white transition-colors">UI/UX</a>
              </li>
              <li>
                <a href="#" class="hover:text-white transition-colors"
                  >هوش مصنوعی</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="font-bold mb-4">لینک‌های مفید</h4>
            <ul class="space-y-2 text-sm text-gray-400">
              <li>
                <a href="#" class="hover:text-white transition-colors"
                  >درباره ما</a
                >
              </li>
              <li>
                <a href="#" class="hover:text-white transition-colors"
                  >تماس با ما</a
                >
              </li>
              <li>
                <a href="#" class="hover:text-white transition-colors"
                  >حریم خصوصی</a
                >
              </li>
              <li>
                <a href="#" class="hover:text-white transition-colors"
                  >شرایط استفاده</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="font-bold mb-4">شبکه‌های اجتماعی</h4>
            <div class="flex space-x-reverse space-x-4">
              <a
                href="#"
                class="w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-gray-700 transition-colors"
              >
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"
                  />
                </svg>
              </a>
              <a
                href="#"
                class="w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-gray-700 transition-colors"
              >
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"
                  />
                </svg>
              </a>
              <a
                href="#"
                class="w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-gray-700 transition-colors"
              >
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"
                  />
                </svg>
              </a>
            </div>
          </div>
        </div>
        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-sm text-gray-400"
        >
          <p>&amp;copy; ۱۴۰۳ وبلاگ مدرن. تمامی حقوق محفوظ است.</p>
        </div>
      </div>
    </footer>

    <script>
      function toPersianDigits(num) {
        if (num === null || num === undefined || isNaN(num)) return "";
        const persianDigits = "۰۱۲۳۴۵۶۷۸۹";
        const withCommas = num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        return withCommas.replace(/\d/g, (digit) => persianDigits[digit]);
      }

      // Tab functionality
      document.querySelectorAll(".tab-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          const tabName = btn.dataset.tab;

          // Update active tab
          document.querySelectorAll(".tab-btn").forEach((b) => {
            b.classList.remove("tab-active");
            b.classList.add("text-gray-600");
          });
          btn.classList.add("tab-active");
          btn.classList.remove("text-gray-600");

          // Show tab content
          document.querySelectorAll(".tab-content").forEach((content) => {
            content.classList.add("hidden");
          });
          document.getElementById(tabName + "-tab").classList.remove("hidden");
        });
      });

      // Order modal functionality
        function showOrderDetails(element) {
            const orderData = JSON.parse(element.getAttribute('data-order'));
            const productsContainer = document.getElementById("modal-products-container");

            productsContainer.innerHTML = '';


              orderData.products.forEach(product => {
                console.log(product)
              productsContainer.innerHTML += `
                <div class="bg-green-50 rounded-2xl p-4 mb-3">
                  <div class="flex items-center space-x-4 space-x-reverse">
                    <div
                      class="w-16 h-16 bg-gradient-to-br from-pink-400 to-purple-500 rounded-2xl flex items-center justify-center"
                    >
                     <img src="${product.image}" alt="">
                    </div>
                    <div class="flex-1">
                      <h5
                        id="modal-product-name"
                        class="font-medium text-gray-800"
                      >
                      ${product.name}
                      </h5>
                      <p id="modal-product-count" class="text-sm text-gray-600" style="margin-top: 10px;font-size: 18px;">${toPersianDigits(product.quantity)}</p>
                    </div>
                    <div class="text-left">
                      ${
                      product.offerPrice
                          ? `
                            <p id="modal-product-price" class="font-semibold text-gray-800 line-through">${toPersianDigits(product.price)}</p>
                            <p id="modal-product-price" class="font-semibold text-gray-800 font-bold text-xl">${toPersianDigits(product.offerPrice)}</p>
                          `
                          : `
                            <p class="text-gray-600 text-right">${toPersianDigits(product.price)}</p>
                          `
                      }
                    </div>
                  </div>
                </div>
              `;
            });

            // Update order information
            document.getElementById("modal-order-id").textContent = `#${orderData.id}`;
            document.getElementById("modal-order-date").textContent = orderData.date;
            document.getElementById("modal-order-price").textContent = `${toPersianDigits(orderData.totalPrice)} تومان`;
            document.getElementById("addressForInfo").textContent = orderData.address;
            document.getElementById("deliveryForInfo").textContent = orderData.delivery;

            // Update discount information
            const discountElement = document.getElementById("modal-discount-price");
            if (orderData.discountAmount > 0) {
                discountElement.textContent = `${toPersianDigits(orderData.discountAmount)} تومان`;
                if (orderData.discount?.originalValue) {
                    discountElement.textContent += ` (${orderData.discount.originalValue})`;
                }
                discountElement.classList.add("text-red-600");
            } else {
                discountElement.textContent = "بدون تخفیف";
                discountElement.classList.remove("text-red-600");
            }

            // Update price summary
            document.getElementById("modal-total-price").textContent = `${toPersianDigits(orderData.originalPrice)} تومان`;
            document.getElementById("modal-final-price").textContent = `${toPersianDigits(orderData.totalPrice)} تومان`;

            // Show modal
            document.getElementById('order-modal').classList.remove('hidden');
            document.getElementById('order-modal').classList.add('flex');
        }

      function closeOrderModal() {
        document.getElementById("order-modal").classList.add("hidden");
        document.getElementById("order-modal").classList.remove("flex");
      }

      // Close modal when clicking outside
      document.getElementById("order-modal").addEventListener("click", (e) => {
        if (e.target === e.currentTarget) {
          closeOrderModal();
        }
      });
    </script>
  </body>
</html>
